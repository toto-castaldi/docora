# Roadmap: Docora Admin Dashboard

## Overview

This roadmap delivers an admin monitoring dashboard for Docora, transforming reactive failure discovery (waiting for client complaints) into proactive system health monitoring. The journey progresses from authentication foundation through data visibility to operational controls, enabling administrators to see and fix notification failures before clients report them.

## Phases

**Phase Numbering:**
- Integer phases (1, 2, 3): Planned milestone work
- Decimal phases (2.1, 2.2): Urgent insertions (marked with INSERTED)

Decimal phases appear between their surrounding integers in numeric order.

- [x] **Phase 1: Foundation & Authentication** - Monorepo structure and admin login
- [x] **Phase 2: Dashboard Integration & Core Display** - Serve dashboard and view system state
- [x] **Phase 3: Retry Operations & Actions** - Fix failures with operational controls
- [x] **Phase 4: Enhanced Visibility** - Search, filtering, and circuit breaker status
- [x] **Phase 5: Production Hardening** - Security, error handling, and deployment

## Phase Details

### Phase 1: Foundation & Authentication
**Goal**: Admin can securely log in to the dashboard using session-based authentication isolated from client API
**Depends on**: Nothing (first phase)
**Requirements**: DASH-01, DASH-08
**Success Criteria** (what must be TRUE):
  1. Admin can log in with username/password and receive session cookie
  2. Admin session persists across browser refreshes without re-login
  3. Admin can log out and session is invalidated
  4. Unauthenticated requests to /admin/* routes redirect to login
  5. pnpm workspace monorepo structure exists with dashboard/ and packages/shared-types/
  6. Admin auth is isolated from client Bearer token auth (separate plugin)
**Plans**: 5 plans

Plans:
- [x] 01-01-PLAN.md — Monorepo structure and shared-types package
- [x] 01-02-PLAN.md — Admin session auth plugin and login/logout routes
- [x] 01-03-PLAN.md — React dashboard scaffold with auth context
- [x] 01-04-PLAN.md — Static file serving and integration
- [x] 01-05-PLAN.md — Human verification of complete auth flow

### Phase 2: Dashboard Integration & Core Display
**Goal**: Admin can view comprehensive system state including apps, repositories, failed notifications, and job queue status
**Depends on**: Phase 1
**Requirements**: DASH-02, DASH-04, DASH-05, DASH-06, DASH-07
**Success Criteria** (what must be TRUE):
  1. Dashboard UI is served from /admin and accessible after login
  2. Admin can view list of registered apps with their callback URLs
  3. Admin can view repositories monitored by each app
  4. Admin can view failed notifications with error details, timestamp, and retry count
  5. Admin can view job queue status showing pending and running job counts
  6. Admin can view history of sent updates (create/update/delete events)
  7. Circuit breaker status is visible for repositories with open circuits
**Plans**: 7 plans

Plans:
- [x] 02-01-PLAN.md — Shared types and TanStack Query setup
- [x] 02-02-PLAN.md — Backend API for apps and repositories
- [x] 02-03-PLAN.md — Backend API for queue, notifications, and overview
- [x] 02-04-PLAN.md — Layout and sidebar navigation
- [x] 02-05-PLAN.md — API client, polling hook, and Overview page
- [x] 02-06-PLAN.md — Apps list and AppDetail pages
- [x] 02-07-PLAN.md — Repositories, Notifications, and Queue pages

### Phase 3: Retry Operations & Actions
**Goal**: Admin can recover from notification failures through retry operations
**Depends on**: Phase 2
**Requirements**: DASH-03
**Success Criteria** (what must be TRUE):
  1. Admin can retry a single failed notification from the failed notifications list
  2. Admin can bulk retry all failed notifications for an app
  3. Admin can force full re-sync of a repository to recover from edge cases
  4. Retry operations show immediate feedback (loading state, then success/error)
  5. After successful retry, notification moves from failed to sent in the UI
**Plans**: 6 plans

Plans:
- [x] 03-01-PLAN.md — Backend action types, service, and single retry endpoint
- [x] 03-02-PLAN.md — Frontend single retry with mutation hooks and retry buttons
- [x] 03-03-PLAN.md — Bulk retry backend with Redis progress tracking and cancellation
- [x] 03-04-PLAN.md — Bulk retry frontend with ConfirmDialog, BulkProgress, and page integration
- [x] 03-05-PLAN.md — Force re-sync backend and frontend (single + per-app)
- [x] 03-06-PLAN.md — Human verification of all retry and re-sync operations

### Phase 4: Enhanced Visibility
**Goal**: Admin can efficiently navigate large datasets through filtering and search
**Depends on**: Phase 3
**Requirements**: None (usability enhancements)
**Success Criteria** (what must be TRUE):
  1. Admin can search apps by name or URL
  2. Admin can filter repositories by monitoring status
  3. Admin can filter notifications by type (create/update/delete)
  4. Admin can sort tables by relevant columns (timestamp, retry count, status)
  5. Large lists are paginated with reasonable page sizes
**Plans**: 5 plans

Plans:
- [x] 04-01-PLAN.md — Backend pagination infrastructure and API endpoint modifications
- [x] 04-02-PLAN.md — Frontend shared components (DataTable, Pagination, FilterBar, FilterChips)
- [x] 04-03-PLAN.md — Apps, Repositories, and Notifications page rewrites
- [x] 04-04-PLAN.md — Queue and AppDetail pages with client-side filtering
- [x] 04-05-PLAN.md — Human verification of all enhanced visibility features

### Phase 5: Production Hardening
**Goal**: Dashboard is production-ready with security, error handling, and deployment optimization
**Depends on**: Phase 4
**Requirements**: None (hardening work)
**Success Criteria** (what must be TRUE):
  1. CSP headers protect against XSS attacks
  2. Rate limiting prevents abuse of admin endpoints
  3. All error states display user-friendly messages (not stack traces)
  4. Loading states show progress for all async operations
  5. Docker multi-stage build produces optimized image with dashboard assets
  6. Empty states guide admin when no data exists
**Plans**: 2 plans

Plans:
- [x] 05-01-PLAN.md — Backend security hardening (CSP, error handler, login rate limiting) + Docker build
- [x] 05-02-PLAN.md — Frontend error boundaries and error/empty state audit

## Progress

**Execution Order:**
Phases execute in numeric order: 1 → 2 → 3 → 4 → 5

| Phase | Plans Complete | Status | Completed |
|-------|----------------|--------|-----------|
| 1. Foundation & Authentication | 5/5 | ✓ Complete | 2026-01-29 |
| 2. Dashboard Integration & Core Display | 7/7 | ✓ Complete | 2026-01-29 |
| 3. Retry Operations & Actions | 6/6 | ✓ Complete | 2026-02-08 |
| 4. Enhanced Visibility | 5/5 | ✓ Complete | 2026-02-13 |
| 5. Production Hardening | 2/2 | ✓ Complete | 2026-02-13 |
