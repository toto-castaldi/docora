---
phase: 14-toolchain-cleanup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - commitlint.config.js
  - .husky/commit-msg
  - .husky/pre-commit
  - .husky/prepare-commit-msg
  - .husky/
  - CLAUDE.md
autonomous: true
requirements:
  - CLEAN-01
  - CLEAN-02
  - CLEAN-03

must_haves:
  truths:
    - "commitlint, czg, cz-git, husky are not in package.json devDependencies"
    - "No 'prepare' or 'commit' scripts exist in package.json"
    - "No 'config.commitizen' section exists in package.json"
    - "package.json version is '0.0.0'"
    - ".husky directory does not exist"
    - "commitlint.config.js does not exist"
    - "CLAUDE.md no longer mentions commitlint, husky, auto-release, or version bump annotations"
  artifacts:
    - path: "package.json"
      provides: "Cleaned devDependencies and scripts without commit tooling"
      contains: "\"version\": \"0.0.0\""
    - path: "CLAUDE.md"
      provides: "Updated conventions section reflecting informal commit style"
      contains: "Preferred style"
  key_links:
    - from: "package.json"
      to: "devDependencies"
      via: "No commitlint, czg, cz-git, or husky entries"
      pattern: "devDependencies.*@types"
---

<objective>
Remove the local commit-based versioning toolchain: commitlint, czg, cz-git, husky, and all related configuration.

Purpose: Eliminate enforced conventional commit tooling and git hooks. Versioning will be driven by STATE.md in Phase 15, not by commit analysis. Conventional commit format continues as informal practice.

Output: Clean package.json without commit tooling, no .husky directory, no commitlint.config.js, updated CLAUDE.md documentation.
</objective>

<execution_context>
@/home/toto/.claude/get-shit-done/workflows/execute-plan.md
@/home/toto/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/14-toolchain-cleanup/14-CONTEXT.md
@package.json
@commitlint.config.js
@CLAUDE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove commit tooling dependencies, scripts, and config from package.json</name>
  <files>package.json</files>
  <action>
Edit `package.json` to make these changes:

1. **Remove devDependencies** — delete these entries:
   - `@commitlint/cli`
   - `@commitlint/config-conventional`
   - `cz-git`
   - `czg`
   - `husky`

2. **Remove scripts** — delete these entries from "scripts":
   - `"prepare": "husky"` — this was the husky install hook
   - `"commit": "czg"` — this was the interactive commit tool

3. **Remove config section** — delete the entire `"config"` block:
   ```json
   "config": {
     "commitizen": {
       "path": "node_modules/cz-git"
     }
   }
   ```

4. **Reset version** — change `"version": "0.15.0"` to `"version": "0.0.0"` (neutral placeholder; Phase 15 will derive version from STATE.md).

After these changes, the remaining devDependencies should be: `@types/bcrypt`, `@types/node`, `@types/pg`, `@vitest/coverage-v8`, `tsx`, `typescript`, `vitest`.

Run `pnpm install` after editing to update the lockfile and verify no broken references.
  </action>
  <verify>Run `pnpm install && pnpm typecheck` — both must succeed. Then verify removed packages are gone: `node -e "const p = require('./package.json'); const d = p.devDependencies; console.log(!d['@commitlint/cli'] && !d['cz-git'] && !d['czg'] && !d['husky'] && !p.scripts.prepare && !p.scripts.commit && !p.config && p.version === '0.0.0' ? 'PASS' : 'FAIL')"`</verify>
  <done>package.json has no commitlint/czg/cz-git/husky devDependencies, no prepare/commit scripts, no commitizen config, version reset to 0.0.0. pnpm install and typecheck pass cleanly.</done>
</task>

<task type="auto">
  <name>Task 2: Delete husky directory, commitlint config, and update CLAUDE.md</name>
  <files>.husky/, commitlint.config.js, CLAUDE.md</files>
  <action>
1. **Delete the entire `.husky/` directory:**
   ```bash
   rm -rf .husky
   ```
   This removes all git hooks: `commit-msg`, `pre-commit`, `prepare-commit-msg`, and the internal `_/` directory with husky's hook runners.

2. **Delete `commitlint.config.js`:**
   ```bash
   rm commitlint.config.js
   ```

3. **Update `CLAUDE.md`** — make these specific changes in the Conventions section:

   a. **Replace the "Conventional Commits" block** (lines 102-108):
   Replace the current block:
   ```
   **Conventional Commits:** All commits must follow the format:
   - `feat: ...` - New feature (bumps MINOR)
   - `fix: ...` - Bug fix (bumps PATCH)
   - `feat!:` or `fix!:` - Breaking change (bumps MAJOR)
   - `docs:`, `style:`, `refactor:`, `test:`, `chore:` - No version bump

   Husky + commitlint enforce this on commit.
   ```

   With this single line:
   ```
   **Commit Style:** Conventional commit format preferred (feat:, fix:, docs:, chore:, etc.) but not enforced by tooling.
   ```

   b. **Remove the "Auto-Release" line** (line 110):
   Delete entirely:
   ```
   **Auto-Release:** Pushes to `main` trigger automatic version bumping and deployment via GitHub Actions.
   ```

   c. **Update the "Version Management" entry** under Architecture:
   Replace:
   ```
   - `src/version.ts` - Single source of truth for version. Updated automatically by CI auto-release - do not edit manually.
   ```
   With:
   ```
   - `src/version.ts` - Version constants and build info. Generated by extract-version script from STATE.md.
   ```

   d. **Remove the "Development Commands" entries for commit/prepare** — the `pnpm commit` command in the Development Commands section does not exist (it is not listed there, only in scripts). No change needed there.
  </action>
  <verify>Run `test ! -d .husky && test ! -f commitlint.config.js && echo "PASS" || echo "FAIL"` to verify deletions. Then verify CLAUDE.md does not contain "bumps MINOR", "bumps PATCH", "husky", "commitlint", "Auto-Release", or "auto-release": `grep -c "bumps MINOR\|bumps PATCH\|husky\|commitlint\|Auto-Release\|auto-release\|do not edit manually" CLAUDE.md | xargs test 0 -eq && echo "PASS" || echo "FAIL"`</verify>
  <done>.husky directory and commitlint.config.js deleted. CLAUDE.md updated: conventional commits described as preferred-not-enforced style, no version bump annotations, no auto-release mention, version.ts description updated.</done>
</task>

</tasks>

<verification>
1. `pnpm install` completes without commitlint, czg, cz-git, or husky being installed
2. `pnpm typecheck` passes
3. `.husky/` directory does not exist
4. `commitlint.config.js` does not exist
5. `package.json` version is "0.0.0"
6. `package.json` has no "prepare" or "commit" scripts
7. `package.json` has no "config.commitizen" section
8. CLAUDE.md reflects informal commit convention, no enforcement tooling references
</verification>

<success_criteria>
- Running `pnpm install` completes without commitlint, czg, cz-git, or husky being installed
- Making a commit with a non-conventional message succeeds (no commit-msg hook)
- package.json version is "0.0.0" as neutral placeholder
- CLAUDE.md documents commit style as preferred convention, not enforced
</success_criteria>

<output>
After completion, create `.planning/phases/14-toolchain-cleanup/14-01-SUMMARY.md`
</output>
