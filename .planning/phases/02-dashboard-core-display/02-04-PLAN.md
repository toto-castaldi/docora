---
phase: 02-dashboard-core-display
plan: 04
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - dashboard/src/components/Layout.tsx
  - dashboard/src/components/Layout.module.css
  - dashboard/src/components/Sidebar.tsx
  - dashboard/src/components/Sidebar.module.css
  - dashboard/src/App.tsx
autonomous: true

must_haves:
  truths:
    - "Dashboard has sidebar navigation with 5 menu items"
    - "Sidebar shows active state based on current route"
    - "Layout wraps all protected routes with sidebar and content area"
    - "Navigation between pages works without page reload"
  artifacts:
    - path: "dashboard/src/components/Layout.tsx"
      provides: "Main layout with sidebar and Outlet"
      contains: "Outlet"
    - path: "dashboard/src/components/Sidebar.tsx"
      provides: "Navigation sidebar with menu items"
      contains: "NavLink"
  key_links:
    - from: "dashboard/src/components/Layout.tsx"
      to: "dashboard/src/components/Sidebar.tsx"
      via: "import and render"
      pattern: "Sidebar"
    - from: "dashboard/src/App.tsx"
      to: "dashboard/src/components/Layout.tsx"
      via: "React Router Route element"
      pattern: "Layout"
---

<objective>
Create dashboard layout with sidebar navigation and route structure for all pages.

Purpose: Establish the visual structure and navigation for the monitoring dashboard.
Output: Layout component with sidebar, navigation links for Overview/Apps/Repositories/Notifications/Queue.
</objective>

<execution_context>
@/home/toto/.claude/get-shit-done/workflows/execute-plan.md
@/home/toto/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-dashboard-core-display/02-CONTEXT.md
@.planning/phases/02-dashboard-core-display/02-RESEARCH.md
@dashboard/src/App.tsx
@dashboard/src/context/AuthContext.tsx
@dashboard/src/components/ProtectedRoute.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Sidebar component with navigation</name>
  <files>dashboard/src/components/Sidebar.tsx, dashboard/src/components/Sidebar.module.css</files>
  <action>
1. Create `dashboard/src/components/Sidebar.module.css`:

```css
.sidebar {
  width: 240px;
  height: 100vh;
  background-color: #1f2937;
  color: white;
  display: flex;
  flex-direction: column;
  position: fixed;
  left: 0;
  top: 0;
}

.header {
  padding: 1.5rem;
  border-bottom: 1px solid #374151;
}

.title {
  margin: 0;
  font-size: 1.25rem;
  font-weight: 600;
  color: white;
}

.subtitle {
  margin: 0.25rem 0 0;
  font-size: 0.75rem;
  color: #9ca3af;
}

.nav {
  flex: 1;
  padding: 1rem 0;
}

.navList {
  list-style: none;
  padding: 0;
  margin: 0;
}

.navItem {
  margin: 0.25rem 0;
}

.navLink {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem 1.5rem;
  color: #d1d5db;
  text-decoration: none;
  transition: background-color 0.15s, color 0.15s;
}

.navLink:hover {
  background-color: #374151;
  color: white;
}

.navLinkActive {
  background-color: #3b82f6;
  color: white;
}

.navLinkActive:hover {
  background-color: #2563eb;
}

.footer {
  padding: 1rem 1.5rem;
  border-top: 1px solid #374151;
}

.logoutButton {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.5rem;
  background-color: transparent;
  border: 1px solid #6b7280;
  border-radius: 0.375rem;
  color: #d1d5db;
  cursor: pointer;
  font-size: 0.875rem;
  transition: background-color 0.15s, border-color 0.15s;
}

.logoutButton:hover {
  background-color: #374151;
  border-color: #9ca3af;
}

.userInfo {
  margin-bottom: 0.75rem;
  font-size: 0.75rem;
  color: #9ca3af;
  text-align: center;
}
```

2. Create `dashboard/src/components/Sidebar.tsx`:

```typescript
import { NavLink } from "react-router";
import {
  LayoutDashboard,
  Boxes,
  GitBranch,
  AlertCircle,
  Clock,
  LogOut,
} from "lucide-react";
import { useAuth } from "../context/AuthContext";
import styles from "./Sidebar.module.css";

interface NavItem {
  to: string;
  icon: typeof LayoutDashboard;
  label: string;
}

const navItems: NavItem[] = [
  { to: "/", icon: LayoutDashboard, label: "Overview" },
  { to: "/apps", icon: Boxes, label: "Apps" },
  { to: "/repositories", icon: GitBranch, label: "Repositories" },
  { to: "/notifications", icon: AlertCircle, label: "Notifications" },
  { to: "/queue", icon: Clock, label: "Queue" },
];

export function Sidebar() {
  const { username, logout } = useAuth();

  const handleLogout = async () => {
    await logout();
  };

  return (
    <aside className={styles.sidebar}>
      <div className={styles.header}>
        <h1 className={styles.title}>Docora</h1>
        <p className={styles.subtitle}>Admin Dashboard</p>
      </div>

      <nav className={styles.nav}>
        <ul className={styles.navList}>
          {navItems.map((item) => (
            <li key={item.to} className={styles.navItem}>
              <NavLink
                to={item.to}
                end={item.to === "/"}
                className={({ isActive }) =>
                  `${styles.navLink} ${isActive ? styles.navLinkActive : ""}`
                }
              >
                <item.icon size={20} />
                {item.label}
              </NavLink>
            </li>
          ))}
        </ul>
      </nav>

      <div className={styles.footer}>
        <p className={styles.userInfo}>Logged in as: {username}</p>
        <button onClick={handleLogout} className={styles.logoutButton}>
          <LogOut size={16} />
          Logout
        </button>
      </div>
    </aside>
  );
}
```
  </action>
  <verify>Run `cd dashboard && pnpm typecheck` to verify types compile</verify>
  <done>Sidebar component created with 5 navigation items and logout button</done>
</task>

<task type="auto">
  <name>Task 2: Create Layout component and update App routes</name>
  <files>dashboard/src/components/Layout.tsx, dashboard/src/components/Layout.module.css, dashboard/src/App.tsx</files>
  <action>
1. Create `dashboard/src/components/Layout.module.css`:

```css
.layout {
  display: flex;
  min-height: 100vh;
}

.main {
  flex: 1;
  margin-left: 240px;
  background-color: #f3f4f6;
  min-height: 100vh;
}

.content {
  padding: 2rem;
  max-width: 1400px;
}
```

2. Create `dashboard/src/components/Layout.tsx`:

```typescript
import { Outlet } from "react-router";
import { Sidebar } from "./Sidebar";
import styles from "./Layout.module.css";

export function Layout() {
  return (
    <div className={styles.layout}>
      <Sidebar />
      <main className={styles.main}>
        <div className={styles.content}>
          <Outlet />
        </div>
      </main>
    </div>
  );
}
```

3. Update `dashboard/src/App.tsx` to use Layout and add route placeholders:

```typescript
import { BrowserRouter, Routes, Route } from "react-router";
import { AuthProvider } from "./context/AuthContext";
import { ProtectedRoute } from "./components/ProtectedRoute";
import { Layout } from "./components/Layout";
import { Login } from "./pages/Login";
import { Dashboard } from "./pages/Dashboard";

// Placeholder pages - will be replaced in next plan
function AppsPage() {
  return <div>Apps page - coming soon</div>;
}
function AppDetailPage() {
  return <div>App detail - coming soon</div>;
}
function RepositoriesPage() {
  return <div>Repositories page - coming soon</div>;
}
function NotificationsPage() {
  return <div>Notifications page - coming soon</div>;
}
function QueuePage() {
  return <div>Queue page - coming soon</div>;
}

export function App() {
  return (
    <BrowserRouter basename="/admin">
      <AuthProvider>
        <Routes>
          <Route path="/login" element={<Login />} />
          <Route element={<ProtectedRoute />}>
            <Route element={<Layout />}>
              <Route index element={<Dashboard />} />
              <Route path="apps" element={<AppsPage />} />
              <Route path="apps/:appId" element={<AppDetailPage />} />
              <Route path="repositories" element={<RepositoriesPage />} />
              <Route path="notifications" element={<NotificationsPage />} />
              <Route path="queue" element={<QueuePage />} />
            </Route>
          </Route>
        </Routes>
      </AuthProvider>
    </BrowserRouter>
  );
}
```
  </action>
  <verify>
1. Run `cd dashboard && pnpm build` to verify build succeeds
2. Run `cd dashboard && pnpm typecheck` to verify types
  </verify>
  <done>Layout component created with sidebar and Outlet, App.tsx updated with route structure for all 5 pages plus AppDetail</done>
</task>

</tasks>

<verification>
1. `cd dashboard && pnpm typecheck` passes
2. `cd dashboard && pnpm build` succeeds
3. Sidebar shows 5 navigation items (Overview, Apps, Repositories, Notifications, Queue)
4. Layout renders sidebar on left, content on right
5. Routes are nested under Layout component
</verification>

<success_criteria>
- Sidebar component renders with 5 navigation links
- Active route is highlighted in sidebar using NavLink
- Layout component wraps content with sidebar
- All routes defined in App.tsx: /, /apps, /apps/:appId, /repositories, /notifications, /queue
- Logout button triggers logout from AuthContext
- TypeScript compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/02-dashboard-core-display/02-04-SUMMARY.md`
</output>
