---
phase: 01-foundation-auth
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - pnpm-workspace.yaml
  - packages/shared-types/package.json
  - packages/shared-types/tsconfig.json
  - packages/shared-types/src/index.ts
  - packages/shared-types/src/admin.ts
autonomous: true

must_haves:
  truths:
    - "pnpm workspace monorepo structure exists"
    - "shared-types package can be imported by other workspace packages"
  artifacts:
    - path: "pnpm-workspace.yaml"
      provides: "Workspace definition"
      contains: "packages"
    - path: "packages/shared-types/package.json"
      provides: "Shared types package configuration"
      contains: "@docora/shared-types"
    - path: "packages/shared-types/src/index.ts"
      provides: "Type exports entry point"
      exports: ["AdminSession", "LoginRequest", "LoginResponse"]
  key_links:
    - from: "packages/shared-types/package.json"
      to: "pnpm-workspace.yaml"
      via: "workspace protocol"
      pattern: "packages/\\*"
---

<objective>
Set up pnpm workspace monorepo structure with shared-types package.

Purpose: Enable type sharing between backend and dashboard frontend, establishing the monorepo foundation for the admin dashboard project.
Output: pnpm-workspace.yaml and packages/shared-types/ with TypeScript types for admin authentication.
</objective>

<execution_context>
@/home/toto/.claude/get-shit-done/workflows/execute-plan.md
@/home/toto/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-auth/01-RESEARCH.md
@package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create pnpm workspace configuration</name>
  <files>pnpm-workspace.yaml</files>
  <action>
Create pnpm-workspace.yaml in the project root with workspace definitions:
- Include "dashboard" folder (to be created in Plan 03)
- Include "packages/*" glob for shared packages

Content:
```yaml
packages:
  - "dashboard"
  - "packages/*"
```

Note: The root package.json does NOT need modification - pnpm automatically detects pnpm-workspace.yaml.
  </action>
  <verify>Run `cat pnpm-workspace.yaml` to confirm file exists with correct content</verify>
  <done>pnpm-workspace.yaml exists with dashboard and packages/* entries</done>
</task>

<task type="auto">
  <name>Task 2: Create shared-types package</name>
  <files>
    packages/shared-types/package.json
    packages/shared-types/tsconfig.json
    packages/shared-types/src/index.ts
    packages/shared-types/src/admin.ts
  </files>
  <action>
Create the shared-types package structure:

1. Create directory: `packages/shared-types/src/`

2. Create `packages/shared-types/package.json`:
```json
{
  "name": "@docora/shared-types",
  "version": "0.0.1",
  "type": "module",
  "main": "./src/index.ts",
  "types": "./src/index.ts",
  "exports": {
    ".": {
      "import": "./src/index.ts",
      "types": "./src/index.ts"
    }
  }
}
```

3. Create `packages/shared-types/tsconfig.json`:
```json
{
  "compilerOptions": {
    "target": "ES2022",
    "module": "ESNext",
    "moduleResolution": "bundler",
    "strict": true,
    "declaration": true,
    "declarationMap": true,
    "esModuleInterop": true,
    "skipLibCheck": true
  },
  "include": ["src/**/*"]
}
```

4. Create `packages/shared-types/src/admin.ts` with admin auth types:
```typescript
/** Session data stored server-side */
export interface AdminSession {
  adminId: string;
  adminUsername: string;
}

/** POST /admin/api/login request body */
export interface LoginRequest {
  username: string;
  password: string;
}

/** POST /admin/api/login success response */
export interface LoginResponse {
  success: true;
}

/** POST /admin/api/login error response */
export interface LoginErrorResponse {
  error: string;
}

/** GET /admin/api/session response when authenticated */
export interface SessionResponse {
  authenticated: true;
  username: string;
}

/** GET /admin/api/session response when not authenticated */
export interface SessionErrorResponse {
  error: string;
}

/** POST /admin/api/logout response */
export interface LogoutResponse {
  success: true;
}
```

5. Create `packages/shared-types/src/index.ts` as the entry point:
```typescript
export type {
  AdminSession,
  LoginRequest,
  LoginResponse,
  LoginErrorResponse,
  SessionResponse,
  SessionErrorResponse,
  LogoutResponse,
} from "./admin.js";
```
  </action>
  <verify>
Run `pnpm install` to link workspaces, then verify with:
- `ls -la packages/shared-types/src/` shows admin.ts and index.ts
- `cat packages/shared-types/package.json | grep name` shows @docora/shared-types
  </verify>
  <done>
- packages/shared-types/ directory exists with package.json, tsconfig.json, and src/ folder
- @docora/shared-types package exports AdminSession, LoginRequest, LoginResponse types
- pnpm install succeeds without errors
  </done>
</task>

</tasks>

<verification>
1. `cat pnpm-workspace.yaml` shows packages configuration
2. `pnpm install` completes without errors
3. `ls packages/shared-types/src/` shows admin.ts and index.ts
4. `pnpm --filter @docora/shared-types exec -- cat package.json` shows correct package name
</verification>

<success_criteria>
- pnpm-workspace.yaml exists at project root
- packages/shared-types/ exists with proper TypeScript package structure
- pnpm install succeeds and recognizes the workspace packages
- Types are properly exported from @docora/shared-types
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-auth/01-01-SUMMARY.md`
</output>
